

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributing &mdash; ABM Project 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=d45e8c67"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="API Reference" href="api.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ABM Project
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="experiments.html">Reproducing experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#uv">uv</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pre-commit-and-ruff">pre-commit and ruff</a></li>
<li class="toctree-l2"><a class="reference internal" href="#project-documentation">Project documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-new-content">Adding new content</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#contribution-process">Contribution process</a></li>
<li class="toctree-l2"><a class="reference internal" href="#experiment-orchestration">Experiment orchestration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-new-experiments-results">Adding new experiments/results</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#decide-how-many-scripts-you-need">1. Decide how many scripts you need.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-your-scripts">2. Create your scripts.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#optional-add-fast-execution-parameters">3. (Optional) add “fast-execution” parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specifying-what-we-want-make-to-create">4. Specifying what we want Make to create.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#specifying-how-to-create-it">5. Specifying how to create it.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ABM Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Contributing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/contributing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Link to this heading"></a></h1>
<p>You want to contribute to this project? Awesome! There are just a couple of
housekeeping things to sort out before you dive in.</p>
<p>Already set up? Check out the <a class="reference internal" href="#contribution-process"><span class="std std-ref">process for making contributions</span></a>,
or <a class="reference internal" href="#experiment-orchestration"><span class="std std-ref">orchestrating new experiments</span></a>.</p>
<section id="uv">
<h2>uv<a class="headerlink" href="#uv" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://docs.astral.sh/uv/">uv</a> is a Python environment and package management tool.
We use it in this repository to keep everything consistent and reproducible. If you don’t
already have uv installed, now is the time to do so :^)</p>
<p>Once this is installed, configure the Python environment and download all required
dependencies by navigating to this repository and running:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>uv<span class="w"> </span>sync
</pre></div>
</div>
<p>This creates a virtual environment under <code class="docutils literal notranslate"><span class="pre">.venv</span></code>, which is used implicitly whenever
you run a uv command. <em>You do not need to manually activate this virtual
environment</em>.</p>
<p>Python packages can be added or removed from the project using <code class="docutils literal notranslate"><span class="pre">uv</span> <span class="pre">add</span> <span class="pre">&lt;PACKAGE_NAME&gt;</span></code>
and <code class="docutils literal notranslate"><span class="pre">uv</span> <span class="pre">remove</span> <span class="pre">&lt;PACKAGE_NAME&gt;</span></code>. Doing so will update both:</p>
<ol class="arabic simple">
<li><p>The pyproject.toml file, which maintains a human-readable project configuration, and</p></li>
<li><p>The uv.lock file, which is a machine-generated file used to specify the project dependency
graph.</p></li>
</ol>
<p>Note that the uv.lock file is not intended to be modified manually (or even really looked at).
For the most part, you can forget it exists.</p>
</section>
<section id="pre-commit-and-ruff">
<h2>pre-commit and ruff<a class="headerlink" href="#pre-commit-and-ruff" title="Link to this heading"></a></h2>
<p>We also use <a class="reference external" href="https://pre-commit.com/">pre-commit</a> with a
<a class="reference external" href="https://docs.astral.sh/ruff/">ruff</a> hook to automatically format all Python
code prior to git commits.</p>
<p>The specific ruff rules which will be applied are specified in the repository
pyproject.toml file. For more information, and a description of these rules, see
the <a class="reference external" href="https://docs.astral.sh/ruff/rules/">ruff documentation</a>.</p>
<p>Installing pre-commit is straightforward using <code class="docutils literal notranslate"><span class="pre">uv</span> <span class="pre">tool</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>uv<span class="w"> </span>tool<span class="w"> </span>install<span class="w"> </span>pre-commit<span class="w"> </span>--with<span class="w"> </span>pre-commit-uv<span class="w"> </span>--force-reinstall

<span class="gp"># </span>Check<span class="w"> </span>installation<span class="w"> </span>was<span class="w"> </span>successful
<span class="gp">$ </span>pre-commit<span class="w"> </span>--version<span class="w">  </span><span class="c1"># Should say &#39;pre-commit 4.2.0&#39; or similar</span>
</pre></div>
</div>
<p>Next you need to initialise pre-commit for this specific repository. This
step will install the pre-commit hooks which will be run prior to every git
commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Initialise<span class="w"> </span>the<span class="w"> </span>pre-commit<span class="w"> </span>hooks
<span class="gp">$ </span>pre-commit<span class="w"> </span>install

<span class="gp"># </span>Check<span class="w"> </span>that<span class="w"> </span>everything<span class="w"> </span>works<span class="w"> </span>as<span class="w"> </span>intended<span class="w"> </span><span class="o">(</span>this<span class="w"> </span>should<span class="w"> </span>succeed<span class="o">)</span>
<span class="gp">$ </span>pre-commit<span class="w"> </span>run<span class="w"> </span>--all-files
</pre></div>
</div>
<p>If the above steps worked as expected, pre-commit should now automatically
lint and format any Python code prior to git commits, preventing accidentally
checking in problematic code.</p>
</section>
<section id="project-documentation">
<h2>Project documentation<a class="headerlink" href="#project-documentation" title="Link to this heading"></a></h2>
<p>Finally, we use Sphinx to build the project documentation. The documentation is
automatically rebuilt whenever new changes are push to the main branch. However,
its never a bad idea to check that everything still works locally after making
changes.</p>
<p>To build the documentation locally:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>uv<span class="w"> </span>will<span class="w"> </span>handle<span class="w"> </span>the<span class="w"> </span>Sphinx<span class="w"> </span>dependencies<span class="w"> </span><span class="k">for</span><span class="w"> </span>you
<span class="gp">$ </span>make<span class="w"> </span>documentation
</pre></div>
</div>
<p>Open the freshly-built documentation with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>open<span class="w"> </span>docs/build/html/index.html
</pre></div>
</div>
<p>If everything worked correctly, the documentation should open in your browser.</p>
<section id="adding-new-content">
<h3>Adding new content<a class="headerlink" href="#adding-new-content" title="Link to this heading"></a></h3>
<p>Sphinx will automatically add any newly-documented functions in existing modules.
If you are adding a new module, you will need to add it to the <code class="docutils literal notranslate"><span class="pre">docs/source/api.rst</span></code> file.
There are already a few examples in there.</p>
</section>
</section>
<section id="contribution-process">
<span id="id2"></span><h2>Contribution process<a class="headerlink" href="#contribution-process" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Fork the repository.</p></li>
<li><p>Create a new branch for your feature or bugfix.</p></li>
<li><p>Make your changes and commit them with clear and concise messages.</p></li>
<li><p>Ensure all tests pass, with <cite>uv run pytest</cite></p></li>
<li><p>Push your changes to your forked repository.</p></li>
<li><p>Create a pull request to the main repository.</p></li>
<li><p>If all GitHub CI checks are successful, great! It’s time to request a review
from one of the project maintainers.</p></li>
</ol>
</section>
<section id="experiment-orchestration">
<span id="id3"></span><h2>Experiment orchestration<a class="headerlink" href="#experiment-orchestration" title="Link to this heading"></a></h2>
<p>The experiments in this project are orchestrated using <a class="reference external" href="https://www.gnu.org/software/make/">Make</a>
via a <a class="reference external" href="https://github.com/VictorianHues/AgentBasedModeling/blob/main/Makefile">Makefile</a>
in the repository root. This process helps with both experimental reproducibility and
computational efficiency.</p>
<p>Orchestrating experiments in code allows users to reproduce our results
without needing to comprehend a web of dependent scripts. Separating experiments into independent
components increases both execution speed (via parallel execution) and development speed (by making
it straightforward to re-run only the necessary code after a change – for instance, not re-running
analysis code when only the plotting functions have changed).</p>
<p>To reproduce all current results, simply run <code class="docutils literal notranslate"><span class="pre">make</span></code> from the project root. To run the pipeline
components in parallel (where Make decides that this is possible), run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-j</span></code>.</p>
<section id="adding-new-experiments-results">
<h3>Adding new experiments/results<a class="headerlink" href="#adding-new-experiments-results" title="Link to this heading"></a></h3>
<p>We use a repetitive pattern in the
<a class="reference external" href="https://github.com/VictorianHues/AgentBasedModeling/blob/main/Makefile">Makefile</a>,
so it is typically straightforward to add new experiments. The general process is as
follows:</p>
<section id="decide-how-many-scripts-you-need">
<h4>1. Decide how many scripts you need.<a class="headerlink" href="#decide-how-many-scripts-you-need" title="Link to this heading"></a></h4>
<p>If the experiment comprises a computationally-heavy “simulation” or “analysis”
section as well as a lightweight “plotting” section, we advise separating these into
two or more scripts. When we do this, we set up a dependency chain in the Makefile.
Make can then figure out exactly what needs to run whenever we make a change in the
code. For instance, if we change the “simulation” script, it will run both this and
the plotting script; if we only change the “plotting” script, it will only run this
one.</p>
</section>
<section id="create-your-scripts">
<h4>2. Create your scripts.<a class="headerlink" href="#create-your-scripts" title="Link to this heading"></a></h4>
<p>Scripts for the Makefile are contained in the
<a class="reference external" href="https://github.com/VictorianHues/AgentBasedModeling/tree/main/scripts">scripts</a>
directory. When implementing multiple scripts for an experiment, it is good practice
to use the same name for them, with a descriptive prefix. For example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scripts/measure_equilibrium_environment_vs_rationality.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scripts/plot_equilibrium_environment_vs_rationality.py</span></code></p></li>
</ul>
<p>Scripts should follow a general structure:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">some_module</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">another_module</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">savedir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
   <span class="o">...</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
   <span class="n">DATA_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">)</span>
   <span class="n">FIGURES_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;results/figures&quot;</span><span class="p">)</span>

   <span class="n">PARAM_1</span> <span class="o">=</span> <span class="o">...</span>
   <span class="n">PARAM_2</span> <span class="o">=</span> <span class="o">...</span>
   <span class="n">PARAM_3</span> <span class="o">=</span> <span class="o">...</span>

   <span class="n">main</span><span class="p">(</span><span class="n">FIGURES_DIR</span><span class="p">,</span> <span class="n">PARAM_1</span><span class="p">,</span> <span class="n">PARAM_2</span><span class="p">,</span> <span class="n">PARAM_3</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">main</span></code> function is responsible for saving interim data, figures, or other
results. Any input data should be loaded prior to this and passed to <code class="docutils literal notranslate"><span class="pre">main</span></code> as
an argument.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Results should be saved in <code class="docutils literal notranslate"><span class="pre">data/</span></code> (for interim data), <code class="docutils literal notranslate"><span class="pre">results/figures</span></code>,
or  <code class="docutils literal notranslate"><span class="pre">results/animations</span></code>. These directories are created automatically by
Make. You do not need to create them manually.</p>
</div>
</section>
<section id="optional-add-fast-execution-parameters">
<h4>3. (Optional) add “fast-execution” parameters<a class="headerlink" href="#optional-add-fast-execution-parameters" title="Link to this heading"></a></h4>
<p>The Makefile supports two operation modes: low quality (the default) and high quality.
The first allows experiments to be run under reduced settings (repeats, timesteps,
etc.) for quick testing. If a script is computationally heavy, we recommend adding
support for the low-quality mode.</p>
<p>This is straightforward with the following pattern, which assumes the Makefile will
run the script with a command-line argument specifying the mode (<code class="docutils literal notranslate"><span class="pre">quick</span> <span class="pre">==</span> <span class="pre">True</span></code>).
Modified lines are annotated with a #!. Note that the figure is now saved with the
filename indicating which mode we’ve generated it in.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>  <span class="c1">#!</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">some_module</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">another_module</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">savedir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">quality_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>  <span class="c1">#!</span>
   <span class="o">...</span>

   <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">savedir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;figure_name_</span><span class="si">{</span><span class="n">quality_label</span><span class="si">}</span><span class="s2">_quality.pdf&quot;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s2">&quot;tight&quot;</span><span class="p">)</span> <span class="c1">#!</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
   <span class="n">DATA_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">)</span>
   <span class="n">FIGURES_DIR</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;results/figures&quot;</span><span class="p">)</span>

   <span class="n">PARAM_1</span> <span class="o">=</span> <span class="o">...</span>
   <span class="n">PARAM_2</span> <span class="o">=</span> <span class="o">...</span>
   <span class="n">QUICK_PARAM_3</span> <span class="o">=</span> <span class="o">...</span> <span class="c1">#!</span>
   <span class="n">FULL_PARAM_3</span> <span class="o">=</span> <span class="o">...</span> <span class="c1">#!</span>

   <span class="c1"># === New code</span>
   <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
   <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--quick&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
   <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

   <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">quick</span><span class="p">:</span>
      <span class="n">quality_label</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span>
      <span class="n">param_3</span> <span class="o">=</span> <span class="n">QUICK_PARAM_3</span>
   <span class="k">else</span><span class="p">:</span>
      <span class="n">quality_label</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span>
      <span class="n">param_3</span> <span class="o">=</span> <span class="n">FULL_PARAM_3</span>

   <span class="c1"># === End of new code</span>

   <span class="n">main</span><span class="p">(</span><span class="n">FIGURES_DIR</span><span class="p">,</span> <span class="n">quality_label</span><span class="p">,</span> <span class="n">PARAM_1</span><span class="p">,</span> <span class="n">PARAM_2</span><span class="p">,</span> <span class="n">param_3</span><span class="p">)</span> <span class="c1">#!</span>
</pre></div>
</div>
<p>Now it’s time to add our scripts to the Makefile.</p>
</section>
<section id="specifying-what-we-want-make-to-create">
<h4>4. Specifying what we want Make to create.<a class="headerlink" href="#specifying-what-we-want-make-to-create" title="Link to this heading"></a></h4>
<p>Lets suppose that our figure name is, <code class="docutils literal notranslate"><span class="pre">my_figure.pdf</span></code>.</p>
<p>We need to let Make know that we want it to generate our figure. To do this, add
the figure name to the <code class="docutils literal notranslate"><span class="pre">FIGURE_NAMES</span></code> variable near the top of the Makefile.
Note that you’ll need to add an escape character (<code class="docutils literal notranslate"><span class="pre">\</span></code>) at the end of the line, or
the line before, to ensure that Make doesn’t insert a linebreak.</p>
</section>
<section id="specifying-how-to-create-it">
<h4>5. Specifying how to create it.<a class="headerlink" href="#specifying-how-to-create-it" title="Link to this heading"></a></h4>
<p>Now suppose that our figure is created by <code class="docutils literal notranslate"><span class="pre">scripts/plot_my_figure.py</span></code>, and that
before this, we need to generate some data from a set of simulations with a separate
script: <code class="docutils literal notranslate"><span class="pre">scripts/measurements_my_figure.py</span></code>.</p>
<p>When reading the Makefile, Make first looks at the “targets” to determine what
it needs to create. In our case, these are the figure names, with <code class="docutils literal notranslate"><span class="pre">$(FIGURES_DIR)</span></code>
appended to the start. Make then looks for a “rule” which generate this target.
Make rules look like this:</p>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="nf">target</span><span class="o">:</span><span class="w"> </span><span class="n">dependencies</span>
<span class="w">   </span>recipe
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">recipe</span></code> is some code which generates the file with the same name as
<code class="docutils literal notranslate"><span class="pre">target</span></code>.</p>
<p>In our example, there are three dependencies: the script which generates the
figure, the input data, and the figures directory (this needs to be created
before our script runs). Assuming we run our code with uv, our make rule will
be:</p>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="nf">results/figures/my_figure.pdf</span><span class="o">:</span><span class="w"> </span>\             <span class="c"># Output file name</span>
<span class="w">            </span>scripts/plot_my_figure.py<span class="w"> </span><span class="se">\ </span><span class="w">     </span><span class="c1"># First dependency</span>
<span class="w">            </span>data/my_figure_input_data.npz<span class="w"> </span><span class="se">\ </span><span class="w"> </span><span class="c1"># Second dependency</span>
<span class="w">            </span><span class="p">|</span><span class="w"> </span>results/figures<span class="w">                </span><span class="c1"># Third dependency</span>
<span class="w">   </span>uv<span class="w"> </span>run<span class="w"> </span>scripts/plot_my_figure.py<span class="w">          </span><span class="c1"># Run the script</span>
</pre></div>
</div>
<p>This is a bit of a mouthful, but Make offers some shortcuts which simplify it a bit.
Firstly, our figures and data directories are saved as variables in the Makefile, so
we can reference them with <code class="docutils literal notranslate"><span class="pre">$(FIGURES)</span></code> and <code class="docutils literal notranslate"><span class="pre">$(DATA)</span></code>. Second, <code class="docutils literal notranslate"><span class="pre">uv</span> <span class="pre">run</span></code> is saved
as <code class="docutils literal notranslate"><span class="pre">$(ENTRYPOINT)</span></code>. Third, the shorthand <code class="docutils literal notranslate"><span class="pre">$&lt;</span></code> refers to our first dependency – i.e.,
the script we want to run!</p>
<p>So in simplified form, we have:</p>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="nf">$(FIGURES_DIR)/my_figure.pdf</span><span class="o">:</span><span class="w"> </span>\                       <span class="c"># Output file name</span>
<span class="w">            </span>scripts/plot_my_figure.py<span class="w"> </span><span class="se">\ </span><span class="w">              </span><span class="c1"># First dependency</span>
<span class="w">            </span><span class="k">$(</span>DATA_DIR<span class="k">)</span>/my_figure_input_data.npz<span class="w"> </span><span class="se">\ </span><span class="w">   </span><span class="c1"># Second dependency</span>
<span class="w">            </span><span class="p">|</span><span class="w"> </span><span class="k">$(</span>FIGURES_DIR<span class="k">)</span><span class="w">                          </span><span class="c1"># Third dependency</span>
<span class="w">   </span><span class="k">$(</span>ENTRYPOINT<span class="k">)</span><span class="w"> </span>$&lt;<span class="w">                                   </span><span class="c1"># Run the script</span>
</pre></div>
</div>
<p>At this stage Make will complain, since we haven’t told it how to find one of
our dependencies (the input data). We need to add a second make rule for this:</p>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="nf">$(DATA_DIR)/my_figure_input_data.npz</span><span class="o">:</span><span class="w"> </span>\             <span class="c"># Output file name</span>
<span class="w">            </span>scripts/measurements_my_figure.py<span class="w"> </span><span class="se">\ </span><span class="w">    </span><span class="c1"># First dependency</span>
<span class="w">            </span><span class="p">|</span><span class="w"> </span><span class="k">$(</span>DATA_DIR<span class="k">)</span><span class="w">                           </span><span class="c1"># Second dependency</span>
<span class="w">   </span><span class="k">$(</span>ENTRYPOINT<span class="k">)</span><span class="w"> </span>$&lt;<span class="w">                                 </span><span class="c1"># Run the script</span>
</pre></div>
</div>
<p>And presto! Run <code class="docutils literal notranslate"><span class="pre">make</span></code>, and your scripts should be added to the experiment
orchestration.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="api.html" class="btn btn-neutral float-left" title="API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Karolina Chlopicka, Victoria Peterson, Shania Sinha, Henry Zwart.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>